Index: LuxBlend_0.1.py
===================================================================
RCS file: /sources/ecume/exporters/luxblend/LuxBlend_0.1.py,v
retrieving revision 1.181
diff -r1.181 LuxBlend_0.1.py
48a49
> from Blender.Window import DrawProgressBar
639c640,643
< 	global meshlist, matnames, geom_filename, geom_pfilename, mat_filename, mat_pfilename, vol_filename, vol_pfilename
---
> 	
> 	export_total_steps = 12.0
> 	
> 	global meshlist, matnames, geom_filename, geom_pfilename, mat_filename, mat_pfilename, vol_filename, vol_pfilename, LuxIsGUI
673c677
< 
---
> 	if LuxIsGUI: DrawProgressBar(0.0/export_total_steps,'Setting up Scene file')
686a691
> 		if LuxIsGUI: DrawProgressBar(1.0/export_total_steps,'Exporting Camera')
726a732
> 		if LuxIsGUI: DrawProgressBar(2.0/export_total_steps,'Exporting Film Settings')
730a737
> 		if LuxIsGUI: DrawProgressBar(3.0/export_total_steps,'Exporting Pixel Filter')
734a742
> 		if LuxIsGUI: DrawProgressBar(4.0/export_total_steps,'Exporting Sampler')
738a747
> 		if LuxIsGUI: DrawProgressBar(5.0/export_total_steps,'Exporting Surface Integrator')
742a752
> 		if LuxIsGUI: DrawProgressBar(6.0/export_total_steps,'Exporting Volume Integrator')
746a757
> 		if LuxIsGUI: DrawProgressBar(7.0/export_total_steps,'Exporting Accelerator')
763a775
> 		if LuxIsGUI: DrawProgressBar(8.0/export_total_steps,'Exporting Environment')
791a804
> 		if LuxIsGUI: DrawProgressBar(9.0/export_total_steps,'Exporting Materials')
800a814
> 		if LuxIsGUI: DrawProgressBar(10.0/export_total_steps,'Exporting Geometry')
812a827
> 		if LuxIsGUI: DrawProgressBar(11.0/export_total_steps,'Exporting Volumes')
822a838
> 	if LuxIsGUI: DrawProgressBar(12.0/export_total_steps,'Export Finished')
4386c4402
< 				print 'Getting Material #'+id
---
> 				DrawProgressBar(0.0,'Getting Material #'+id)
4401d4416
< 					print 'Got it!'
4404,4405c4419,4424
< 			except: print "ERROR: download failed"
< 		else: print "ERROR: material id is not valid"
---
> 			except:
> 				print "ERROR: download failed"
> 			finally:
> 				DrawProgressBar(1.0,'')
> 		else:
> 			print "ERROR: material id is not valid"
4407c4426,4427
< except: print "WARNING: LmrDB support not available"
---
> except:
> 	print "WARNING: LmrDB support not available"
4861a4882
> 	LuxIsGUI = False
4926a4948,4949
> 	LuxIsGUI = True
> 	
